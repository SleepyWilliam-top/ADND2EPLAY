// é˜µè¥æ•°æ®

export interface Alignment {
  id: string;
  name: string;
  englishName: string;
  shortName: string; // ç®€ç§°ï¼Œå¦‚"å®ˆåºå–„è‰¯"
  category: {
    lawChaos: 'lawful' | 'neutral' | 'chaotic';
    goodEvil: 'good' | 'neutral' | 'evil';
  };
  icon: string;
  description: string;
  examples: string; // å…¸åž‹ä¾‹å­
}

// ä¹ç§é˜µè¥
export const alignments: Alignment[] = [
  {
    id: 'lawful_good',
    name: 'å®ˆåºå–„è‰¯',
    englishName: 'Lawful Good',
    shortName: 'å®ˆåºå–„è‰¯',
    category: { lawChaos: 'lawful', goodEvil: 'good' },
    icon: 'âš–ï¸âœ¨',
    description:
      'è¿™ä¸ªé˜µè¥çš„äººä»¬ç›¸ä¿¡ï¼Œç»„ç»‡ä¸¥å¯†çš„æ”¿åºœæ‰€å»ºç«‹çš„æœ‰åºè€Œå¼ºå¤§çš„ç¤¾ä¼šçš„èƒ½å¤Ÿæ›´å¥½åœ°é€ ç¦å¤§å¤šæ•°äººã€‚ä¸ºäº†ç¡®ä¿ç”Ÿæ´»çš„è´¨é‡ï¼Œäººä»¬å¿…é¡»åˆ¶å®šå’Œéµå®ˆæ³•å¾‹ã€‚å½“äººä»¬éµçºªå®ˆæ³•ã€ä¹äºŽåŠ©äººï¼Œç¤¾ä¼šå°±èƒ½å¾—åˆ°æ•´ä½“çš„ç¹è£ã€‚å› æ­¤ï¼Œå®ˆåºå–„è‰¯çš„è§’è‰²ä¼šä¸ºäº†é‚£äº›ä¼šç»™å¤§å¤šæ•°äººå¸¦æ¥æœ€å¤§åˆ©ç›Šå¹¶é€ æˆæœ€å°‘æŸå¤±çš„äº‹æƒ…è€ŒåŠªåŠ›ã€‚',
    examples: 'è¯šå®žå‹¤å¥‹çš„å†œå¥´ã€ä»æ…ˆç¿æ™ºçš„å›½çŽ‹ã€ä¸¥è‚ƒè€Œç›´çŽ‡çš„æ³•åŠ¡å¤§è‡£',
  },
  {
    id: 'neutral_good',
    name: 'ä¸­ç«‹å–„è‰¯',
    englishName: 'Neutral Good',
    shortName: 'ä¸­ç«‹å–„è‰¯',
    category: { lawChaos: 'neutral', goodEvil: 'good' },
    icon: 'ðŸ•Šï¸',
    description:
      'è¿™äº›è§’è‰²è®¤ä¸ºåŠ›é‡çš„å¹³è¡¡æ˜¯è‡³å…³é‡è¦çš„ï¼Œä½†æ˜¯å¯¹ç§©åºä¸Žæ··æ²Œçš„è€ƒè™‘å¹¶ä¸èƒ½æ»¡è¶³å–„è‰¯çš„éœ€æ±‚ã€‚æ—¢ç„¶å®‡å®™å¦‚æ­¤å¹¿é˜”ï¼Œå­˜åœ¨ç€è®¸å¤šä¸ºäº†ä¸åŒç›®æ ‡å¥‹æ–—çš„é€ ç‰©ï¼Œä¸ºå–„è‰¯è€Œå¥‹æ–—ä¸ä»…ä¸ä¼šæ‰“ç ´å®‡å®™çš„å¹³è¡¡ï¼Œè¿˜èƒ½æ›´å¥½åœ°ä¿æŒå®ƒã€‚å¦‚æžœä¿ƒè¿›å–„è‰¯æ„å‘³ç€è¦æ”¯æŒæœ‰åºçš„ç¤¾ä¼šï¼Œé‚£ä¹ˆè¿™å°±æ˜¯å¿…é¡»è¦åšçš„äº‹ã€‚å¦‚æžœå–„è‰¯åªèƒ½åœ¨æŽ¨ç¿»çŽ°å­˜çš„ç¤¾ä¼šç§©åºåŽæ‰å‡ºçŽ°ï¼Œé‚£å°±åŽ»åšã€‚å¯¹å–„è‰¯è€Œè¨€ï¼Œç¤¾ä¼šç»“æž„æœ¬è´¨ä¸Šæ²¡æœ‰ä»»ä½•ä»·å€¼ã€‚',
    examples: 'è¿åå›½çŽ‹çš„å‘½ä»¤è€ŒåŽ»æ¯ç­ä»–æ‰€è®¤ä¸ºé‚ªæ¶çš„äº‹ç‰©çš„è´µæ—',
  },
  {
    id: 'chaotic_good',
    name: 'æ··ä¹±å–„è‰¯',
    englishName: 'Chaotic Good',
    shortName: 'æ··ä¹±å–„è‰¯',
    category: { lawChaos: 'chaotic', goodEvil: 'good' },
    icon: 'ðŸŒŸ',
    description:
      'æ··ä¹±å–„è‰¯çš„è§’è‰²ä»æ…ˆè€Œæœ‰çˆ±å¿ƒï¼Œä½†ä»–ä»¬ä¹Ÿæ˜¯å¼ºçƒˆçš„ä¸ªäººä¸»ä¹‰è€…ã€‚ä»–ä»¬ä¿¡ä»°ä¸€åˆ‡å–„è‰¯ä¸Žæ­£ç¡®çš„ç¾Žå¾·ï¼Œä½†åˆååˆ†è½»è§†æ³•å¾‹ä¸Žè§„çŸ©ã€‚ä»–ä»¬å¾ˆå°‘å¼•å¯¼å¹¶å‘Šè¯‰äººä»¬è¯¥åšä½•äº‹ã€‚ä»–ä»¬çš„è¡Œä¸ºåªå—è‡ªèº«çš„é“å¾·æŒ‡å¼•ï¼Œä½†è¿™äº›è¡Œä¸ºä¹Ÿå¯èƒ½ä¸è¢«ç¤¾ä¼šçš„å…¶ä»–æˆå‘˜æ‰€æŽ¥å—ï¼Œå³ä½¿å®ƒä»¬æ˜¯å¥½çš„ã€‚',
    examples: 'æ€»æ˜¯åœ¨æ—…è¡Œçš„ã€æœ‰è‰¯çŸ¥è€Œå‹‡æ•¢çš„å¼€æ‹“è€…',
  },
  {
    id: 'lawful_neutral',
    name: 'å®ˆåºä¸­ç«‹',
    englishName: 'Lawful Neutral',
    shortName: 'å®ˆåºä¸­ç«‹',
    category: { lawChaos: 'lawful', goodEvil: 'neutral' },
    icon: 'âš–ï¸',
    description:
      'ç§©åºå’Œå›¢ä½“å¯¹è¿™ä¸ªé˜µè¥çš„è§’è‰²æ¥è¯´æœ‰ç€æ— ä¸Šçš„é‡è¦æ€§ã€‚ä»–ä»¬ç›¸ä¿¡é«˜æ•ˆä¸”å¼ºæœ‰åŠ›çš„æ”¿åºœï¼Œä¸è®ºå®ƒæ–½è¡Œæš´æ”¿è¿˜æ˜¯ä»æ”¿ã€‚ç”±å›¢ä½“å’Œç»„ç»‡å¸¦æ¥çš„åˆ©ç›Šè¦è¿œé«˜äºŽå®ƒä»¬æ‰€å¼•èµ·çš„é“å¾·é—®é¢˜ã€‚',
    examples: 'ä¸æƒœä¸€åˆ‡ä»£ä»·åŽ»è¿½æ•å›å¾’çš„å®¡åˆ¤å®˜ã€ä»Žä¸è´¨ç–‘å‘½ä»¤çš„å£«å…µ',
  },
  {
    id: 'true_neutral',
    name: 'ç»å¯¹ä¸­ç«‹',
    englishName: 'True Neutral',
    shortName: 'ç»å¯¹ä¸­ç«‹',
    category: { lawChaos: 'neutral', goodEvil: 'neutral' },
    icon: 'âš›ï¸',
    description:
      'ç»å¯¹ä¸­ç«‹çš„è§’è‰²ä¿¡ä»°å®‡å®™ä¸‡ç‰©çš„ç»ˆæžå¹³è¡¡ï¼Œå¹¶ä¸”æ‹’ç»ç”¨å–„è‰¯æˆ–é‚ªæ¶æ¥è¡¡é‡ä»–äººçš„è¡Œä¸ºã€‚å› ä¸ºä¸–ç•Œä¸Šçš„å¤§éƒ¨åˆ†äººéƒ½ä¼šå¯¹äº‹ç‰©åšå‡ºåˆ¤æ–­ï¼Œæ‰€ä»¥ç»å¯¹ä¸­ç«‹çš„è§’è‰²æžä¸ºç¨€æœ‰ã€‚ç»å¯¹ä¸­ç«‹çš„è§’è‰²ä¼šå°½è‡ªå·±çš„æœ€å¤§åŠªåŠ›æ¥é˜²æ­¢è‡ªå·±åå‘å–„è‰¯æˆ–é‚ªæ¶ã€å®ˆåºæˆ–æ··ä¹±çš„åŠ¿åŠ›ã€‚ä»–ä»¬çš„ä½¿å‘½å°±æ˜¯çœ‹ç€æ‰€æœ‰è¿™äº›äº‹ç‰©ä¿æŒç€å¹³è¡¡çš„ç«žäº‰ã€‚ä¸€ä¸ªç»å¯¹ä¸­ç«‹çš„å¾·é²ä¼Šå¯èƒ½ä¼šå¸®åŠ©å½“åœ°çš„ç”·çˆµæ¥é•‡åŽ‹ä¸€ä¸ªé‚ªæ¶çš„è±ºç‹¼éƒ¨æ—ï¼Œä½†åœ¨è±ºç‹¼è¢«é€¼åˆ°ç­ç»çš„è¾¹ç¼˜ä¹‹æ—¶ä»–å°±ä¼šé€€å‡ºæˆ–è€…è½¬è€Œå¸®åŠ©å®ƒä»¬ã€‚',
    examples: 'ç»å¯¹ä¸­ç«‹çš„å¾·é²ä¼Š',
  },
  {
    id: 'chaotic_neutral',
    name: 'æ··ä¹±ä¸­ç«‹',
    englishName: 'Chaotic Neutral',
    shortName: 'æ··ä¹±ä¸­ç«‹',
    category: { lawChaos: 'chaotic', goodEvil: 'neutral' },
    icon: 'ðŸŽ²',
    description:
      'æ··ä¹±ä¸­ç«‹çš„è§’è‰²è®¤ä¸ºä»»ä½•äº‹ç‰©éƒ½æ²¡æœ‰å›ºå®šçš„è§„å¾‹ï¼ŒåŒ…æ‹¬ä»–ä»¬è‡ªå·±çš„è¡Œä¸ºã€‚ä»¥æ­¤ä¸ºä¿¡æ¡ï¼Œä»–ä»¬å€¾å‘äºŽåŽ»å®žè·µé‚£äº›å¶ç„¶åˆ’è¿‡è„‘æµ·çš„å¥‡æ€ªå¿µå¤´ã€‚å–„æ¶è§‚å¿µä¸ä¼šå·¦å³ä»–ä»¬çš„å†³å®šã€‚æ··ä¹±ä¸­ç«‹çš„è§’è‰²æ˜¯éžå¸¸éš¾å¯¹ä»˜çš„ã€‚è¿™ç±»è§’è‰²ä»¥åœ¨æ¯«æ— ç›®çš„çš„èµŒåšä¸­æŠŠè‡ªå·±çš„æ‰€æœ‰ä¸œè¥¿éƒ½åŽ‹åœ¨è€Œä¸€ä¸ªéª°å­ä¸Šè€Œè‘—åã€‚ä»–ä»¬å¤§å¤šæ•°éƒ½é ä¸ä½ã€‚äº‹å®žä¸Šï¼Œå…³äºŽä»–ä»¬çš„å”¯ä¸€çš„å¯ä¿¡ä¹‹å¤„å°±æ˜¯ä»–ä»¬çš„ä¸å¯ä¿¡ï¼è¿™ä¸ªé˜µè¥ä¹Ÿè®¸æ˜¯æœ€éš¾ä»¥æ‰®æ¼”çš„ã€‚',
    examples: 'ç‹‚äººå’Œç–¯å­',
  },
  {
    id: 'lawful_evil',
    name: 'å®ˆåºé‚ªæ¶',
    englishName: 'Lawful Evil',
    shortName: 'å®ˆåºé‚ªæ¶',
    category: { lawChaos: 'lawful', goodEvil: 'evil' },
    icon: 'âš–ï¸ðŸ”¥',
    description:
      'è¿ç”¨ç¤¾ä¼šä¸Žæ³•å¾‹æ¥è°‹å–ç§åˆ©æ˜¯è¿™äº›è§’è‰²çš„ä¿¡æ¡ã€‚åˆ¶åº¦ä¸Žç»„ç»‡é¼“èˆžç€é‚£äº›åº”å½“å±…äºŽç»Ÿæ²»è€…åœ°ä½çš„äººï¼Œä¹Ÿä¼šåœ¨ä¸»äººä¸Žä»†ä»Žé—´å»ºç«‹ä¸€ä¸ªå·®å¼‚åˆ†æ˜Žçš„ç­‰çº§ä½“ç³»ã€‚ä¸ºæ­¤ï¼Œå®ˆåºé‚ªæ¶çš„è§’è‰²æ”¯æŒé‚£äº›èƒ½ä¿æŠ¤è‡ªå·±ç§åˆ©çš„æ³•å¾‹ä¸Žç¤¾ä¼šã€‚å¦‚æžœæœ‰äººå› ä¸ºæœ‰åˆ©äºŽå®ˆåºé‚ªæ¶è§’è‰²çš„æ³•å¾‹è’™å—ä¼¤ç—›æˆ–æŸå¤±ï¼Œé‚£å°±å¤ªé—æ†¾äº†ã€‚ä½†æ˜¯ï¼Œå®ˆåºé‚ªæ¶çš„è§’è‰²ä¸æ˜¯å› å¯¹åˆ‘ç½šçš„ç•æƒ§è€Œéµå®ˆæ³•å¾‹ã€‚ä»–ä»¬é€šå¸¸éƒ½ä¼šååˆ†æ…Žé‡å¾—ç»™äºˆæ‰¿è¯ºï¼Œå› ä¸ºä»–ä»¬å¯èƒ½ä¼šè¢«è¿«éµå®ˆè‡ªå·±æ›¾åˆ¶å®šçš„å¯¹è‡ªå·±ä¸åˆ©çš„å¥‘çº¦æˆ–èª“è¨€ã€‚',
    examples: 'é“è…•çš„æš´å›ã€ç‹¡è¯ˆè´ªå©ªçš„å•†äºº',
  },
  {
    id: 'neutral_evil',
    name: 'ä¸­ç«‹é‚ªæ¶',
    englishName: 'Neutral Evil',
    shortName: 'ä¸­ç«‹é‚ªæ¶',
    category: { lawChaos: 'neutral', goodEvil: 'evil' },
    icon: 'ðŸ’€',
    description:
      'ä¸­ç«‹é‚ªæ¶çš„è§’è‰²é¦–å…ˆè€ƒè™‘çš„å°±æ˜¯ä»–ä»¬è‡ªå·±ï¼Œä»¥åŠä»–ä»¬çš„è‡ªèº«åˆ©ç›Šã€‚ä»–ä»¬ä¸ä»‹æ„åœ¨åšäº‹æ—¶é€‰æ‹©ç‹¬ç«‹å®Œæˆè¿˜æ˜¯ä¸Žä»–äººåˆä½œã€‚ä»–ä»¬åªæ˜¯æƒ³è¦é¢†å…ˆäºŽäººã€‚å¦‚æžœæœ‰ä¸€ä¸ªå¿«æ·ç®€å•çš„æ–¹å¼èƒ½å¤ŸèŽ·å–æ”¶ç›Šï¼Œä¸è®ºå®ƒæ˜¯åˆæ³•ã€å¯ç–‘è¿˜æ˜¯æ˜Žæ˜¾è¿æ³•ï¼Œä»–ä»¬éƒ½ä¼šåˆ©ç”¨å®ƒã€‚è™½ç„¶ä¸­ç«‹é‚ªæ¶çš„è§’è‰²æ²¡æœ‰æ··ä¹±è§’è‰²é‚£ç§äººäººä¸ºå·±çš„ç”Ÿæ´»æ€åº¦ï¼Œä½†ä»–ä»¬ä¹Ÿä¸ä¼šç”±äºŽè‡ªå·±ä¸ºç§åˆ©èƒŒå›ä»–äººè€Œæ„Ÿåˆ°ä¸å®‰ã€‚ä»–ä»¬çš„å¿ è¯šé€šå¸¸éƒ½åŸºäºŽé‡‘é’±ä¸ŽæƒåŠ›ï¼Œè¿™å¾—ä½¿ä»–ä»¬å¾ˆå®¹æ˜“æŽ¥å—è´¿èµ‚ã€‚',
    examples: 'ä¸æ‹©æ‰‹æ®µçš„é›‡ä½£å…µã€æ™®é€šçš„ç›—è´¼ã€ä¸ºäº†å¾—åˆ°ç»„ç»‡çš„ä¿æŠ¤å’Œæ™‹å‡è€ŒèƒŒå›çš„åŒé¢é—´è°',
  },
  {
    id: 'chaotic_evil',
    name: 'æ··ä¹±é‚ªæ¶',
    englishName: 'Chaotic Evil',
    shortName: 'æ··ä¹±é‚ªæ¶',
    category: { lawChaos: 'chaotic', goodEvil: 'evil' },
    icon: 'ðŸ’¥',
    description:
      'è¿™äº›è§’è‰²æ˜¯æ‰€æœ‰å–„è‰¯å’Œç»„ç»‡çš„ç¾æ˜Ÿã€‚æ··ä¹±é‚ªæ¶è§’è‰²çš„è¡ŒåŠ¨å¤§å¤šéƒ½åŸºäºŽä¸ªäººåˆ©ç›Šä¸Žä¹è¶£ã€‚ä»–ä»¬è®¤ä¸ºä»¥ä»»ä½•å¯è¡Œçš„æ‰‹æ®µåŽ»å–å¾—ä»–ä»¬æƒ³è¦çš„ä¸œè¥¿æ˜¯ç†æ‰€åº”å½“çš„äº‹ã€‚æ³•å¾‹å’Œæ”¿åºœåªæ˜¯å¼±è€…ä»¬ç”¨æ¥ä¿æŠ¤è‡ªå·±çš„å·¥å…·ã€‚å¼ºè€…æœ‰æƒåŽ»å–å¾—ä»–ä»¬æƒ³è¦çš„ï¼Œè€Œå¼±è€…åˆ™ä¼šè¢«å‰¥å‰Šã€‚å½“æ··ä¹±é‚ªæ¶çš„è§’è‰²åŠ å…¥åˆ°é˜Ÿä¼ä¹‹ä¸­ï¼Œä»–ä»¬å¾€å¾€ä¸ä¼šä¹–ä¹–åˆä½œï¼Œåè€Œæ›´å–œæ¬¢åŽ»æŒ‘æˆ˜å¼ºå¤§çš„æ•Œäººã€‚è¿™æ ·çš„é˜Ÿä¼åªèƒ½è¢«ä¸€ä¸ªèƒ½å¤Ÿè¿«ä½¿ä¸‹å±žä¹–ä¹–å¬è¯çš„å¼ºå¤§é¦–é¢†æ‰€é©¾é©­ã€‚æ—¢ç„¶é¦–é¢†çš„å®åº§å»ºç«‹åœ¨çº¯ç²¹çš„åŠ›é‡ä¹‹ä¸Šï¼Œé‚£ä¹ˆå½“ä»–å˜å¼±ä¹‹æ—¶ä¹Ÿå¯ä»¥è¢«å…¶ä»–äººä½¿ç”¨ä»»ä½•æ–¹æ³•å–è€Œä»£ä¹‹ã€‚',
    examples: 'è„‘ç­‹ä¸çµå…‰çš„å‡¶æš´æµ·ç›—å’Œæ€ªç‰©',
  },
];

// èŒä¸šé˜µè¥é™åˆ¶
export interface ClassAlignmentRestriction {
  classId: string;
  allowedAlignments?: string[]; // å…è®¸çš„é˜µè¥IDåˆ—è¡¨ï¼Œundefinedè¡¨ç¤ºå…è®¸æ‰€æœ‰
  requiredAlignment?: string; // å¿…é¡»çš„é˜µè¥IDï¼ˆå¦‚åœ£æ­¦å£«å¿…é¡»å®ˆåºå–„è‰¯ï¼‰
  description?: string; // é™åˆ¶è¯´æ˜Ž
}

export const classAlignmentRestrictions: ClassAlignmentRestriction[] = [
  {
    classId: 'fighter',
    description: 'æˆ˜å£«å¯ä»¥å±žäºŽä»»ä½•é˜µè¥',
  },
  {
    classId: 'paladin',
    requiredAlignment: 'lawful_good',
    allowedAlignments: ['lawful_good'],
    description: 'åœ£æ­¦å£«å¿…é¡»æ˜¯å®ˆåºå–„è‰¯é˜µè¥ï¼Œä¸”å¿…é¡»å§‹ç»ˆä¿æŒå®ˆåºå–„è‰¯',
  },
  {
    classId: 'ranger',
    allowedAlignments: ['lawful_good', 'neutral_good', 'chaotic_good'],
    description: 'æ¸¸ä¾ å¿…é¡»æ˜¯å–„è‰¯é˜µè¥ï¼ˆå¯ä»¥æ˜¯å®ˆåºã€ä¸­ç«‹æˆ–æ··ä¹±å–„è‰¯ï¼‰',
  },
  {
    classId: 'mage',
    description: 'å·«å¸ˆå¯ä»¥å±žäºŽä»»ä½•é˜µè¥',
  },
  {
    classId: 'cleric',
    description: 'ç‰§å¸ˆå¯ä»¥å±žäºŽä»»ä½•é˜µè¥',
  },
  {
    classId: 'druid',
    requiredAlignment: 'true_neutral',
    allowedAlignments: ['true_neutral'],
    description: 'å¾·é²ä¼Šå¿…é¡»æ˜¯ç»å¯¹ä¸­ç«‹é˜µè¥',
  },
  {
    classId: 'thief',
    allowedAlignments: [
      'lawful_neutral',
      'lawful_evil',
      'neutral_good',
      'true_neutral',
      'neutral_evil',
      'chaotic_good',
      'chaotic_neutral',
      'chaotic_evil',
    ],
    description: 'ç›—è´¼å¯ä»¥é€‰æ‹©é™¤å®ˆåºå–„è‰¯ä¹‹å¤–çš„æ‰€æœ‰é˜µè¥',
  },
  {
    classId: 'bard',
    allowedAlignments: ['lawful_neutral', 'neutral_good', 'true_neutral', 'neutral_evil', 'chaotic_neutral'],
    description: 'åŸæ¸¸è¯—äººçš„é˜µè¥å¿…é¡»å¸¦æœ‰ä¸­ç«‹çš„éƒ¨åˆ†',
  },
];

// è¾…åŠ©å‡½æ•°ï¼šæ ¹æ®IDèŽ·å–é˜µè¥
export function getAlignmentById(alignmentId: string): Alignment | undefined {
  return alignments.find(a => a.id === alignmentId);
}

// è¾…åŠ©å‡½æ•°ï¼šæ£€æŸ¥èŒä¸šæ˜¯å¦å¯ä»¥é€‰æ‹©æŸä¸ªé˜µè¥
export function canClassSelectAlignment(classId: string, alignmentId: string): boolean {
  const restriction = classAlignmentRestrictions.find(r => r.classId === classId);

  // å¦‚æžœæ²¡æœ‰é™åˆ¶ï¼Œå…è®¸æ‰€æœ‰é˜µè¥
  if (!restriction || !restriction.allowedAlignments) {
    return true;
  }

  // æ£€æŸ¥æ˜¯å¦åœ¨å…è®¸åˆ—è¡¨ä¸­
  return restriction.allowedAlignments.includes(alignmentId);
}

// è¾…åŠ©å‡½æ•°ï¼šèŽ·å–èŒä¸šçš„é˜µè¥é™åˆ¶è¯´æ˜Ž
export function getClassAlignmentRestriction(classId: string): ClassAlignmentRestriction | undefined {
  return classAlignmentRestrictions.find(r => r.classId === classId);
}

// è¾…åŠ©å‡½æ•°ï¼šèŽ·å–èŒä¸šå¯é€‰çš„é˜µè¥åˆ—è¡¨
export function getAvailableAlignmentsForClass(classId: string): Alignment[] {
  const restriction = classAlignmentRestrictions.find(r => r.classId === classId);

  // å¦‚æžœæ²¡æœ‰é™åˆ¶ï¼Œè¿”å›žæ‰€æœ‰é˜µè¥
  if (!restriction || !restriction.allowedAlignments) {
    return alignments;
  }

  // è¿”å›žå…è®¸çš„é˜µè¥
  return alignments.filter(a => restriction.allowedAlignments!.includes(a.id));
}
