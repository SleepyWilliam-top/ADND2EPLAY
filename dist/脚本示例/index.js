var e={289:()=>{$(()=>{toastr.success('你已经成功加载示例脚本!','恭喜你!')}),$(window).on('pagehide',()=>{toastr.info('你已经卸载示例脚本!','再见!')})},621:()=>{$(()=>{replaceScriptButtons([{name:'晚上好',visible:!0}]),eventOn(getButtonEvent('晚上好'),()=>{toastr.warning('晚安, 络络')})})},718:()=>{eventOn(tavern_events.MESSAGE_UPDATED,e=>{toastr.error(`谁让你动我第 ${e} 楼消息的😡`,"干什么!")})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n(289),n(621);const r=Vue,i=Pinia,o=z,s=o.z.object({button_selected:o.z.boolean().default(!1)}).prefault({}),a=(0,i.defineStore)('settings',()=>{const e=(0,r.ref)(function(e,t){const n=function(e,t){const n=e.safeParse(t);if(!n.success)throw Error(o.z.prettifyError(n.error));return n.data}(e,t);return _.assign(t,n)}(s,getVariables({type:'script',script_id:getScriptId()})));return(0,r.watch)(e,e=>{insertOrAssignVariables((0,r.toRaw)(e),{type:'script',script_id:getScriptId()})},{immediate:!0,deep:!0}),{settings:e}});const c={class:"example-extension-settings"},l={class:"inline-drawer"},p={class:"inline-drawer-content"},u={class:"example-extension_block flex-container"},d=(0,r.defineComponent)({__name:'设置界面',setup(e){const{settings:t}=(0,i.storeToRefs)(a()),n=()=>{toastr.success('你好呀!')};return(e,i)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",c,[(0,r.createElementVNode)("div",l,[i[3]||(i[3]=(0,r.createElementVNode)("div",{class:"inline-drawer-toggle inline-drawer-header"},[(0,r.createElementVNode)("b",null,(0,r.toDisplayString)("脚本示例")),(0,r.createElementVNode)("div",{class:"inline-drawer-icon fa-solid fa-circle-chevron-down down"})],-1)),(0,r.createElementVNode)("div",p,[(0,r.createElementVNode)("div",{class:"example-extension_block flex-container"},[(0,r.createElementVNode)("input",{class:"menu_button",type:"submit",value:"示例按钮",onClick:n})]),(0,r.createElementVNode)("div",u,[(0,r.withDirectives)((0,r.createElementVNode)("input",{"onUpdate:modelValue":i[0]||(i[0]=e=>(0,r.unref)(t).button_selected=e),type:"checkbox"},null,512),[[r.vModelCheckbox,(0,r.unref)(t).button_selected]]),i[1]||(i[1]=(0,r.createElementVNode)("label",{for:"example_setting"},(0,r.toDisplayString)("示例开关"),-1))]),i[2]||(i[2]=(0,r.createElementVNode)("hr",{class:"sysHR"},null,-1))])])]))}}),f=(0,r.createApp)(d).use((0,i.createPinia)());$(()=>{const e=$('<div>').attr('script_id',getScriptId());$('#extensions_settings2').append(e),function(){if($(`head > div[script_id="${getScriptId()}"]`).length>0)return;const e=$("<div>").attr('script_id',getScriptId()).append($("head > style",document).clone());$('head').append(e)}(),f.mount(e[0])}),$(window).on('unload',()=>{f.unmount(),$(`head > div[script_id="${getScriptId()}"]`).remove(),$(`div[script_id="${getScriptId()}"]`).remove()});n(718);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const b=function e(t){return n.withOptions=n=>e(m(m({},t),n)),n;function n(e,...n){const r="string"==typeof e?[e]:e.raw,{alignValues:i=!1,escapeSpecialCharacters:o=Array.isArray(e),trimWhitespace:s=!0}=t;let a="";for(let e=0;e<r.length;e++){let t=r[e];if(o&&(t=t.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),a+=t,e<n.length){a+=i?h(n[e],a):n[e]}}const c=a.split("\n");let l=null;for(const e of c){const t=e.match(/^(\s+)\S+/);if(t){const e=t[1].length;l=l?Math.min(l,e):e}}if(null!==l){const e=l;a=c.map(t=>" "===t[0]||"\t"===t[0]?t.slice(e):t).join("\n")}return s&&(a=a.trim()),o&&(a=a.replace(/\\n/g,"\n")),a}}({}),y=b;function h(e,t){if("string"!=typeof e||!e.includes("\n"))return e;const n=t.slice(t.lastIndexOf("\n")+1).match(/^(\s+)/);if(n){const t=n[1];return e.replace(/\n/g,`\n${t}`)}return e}$(async()=>{0===getLastMessageId()&&await createChatMessages([{role:'assistant',message:y("\n                   [查看日记: 这是第二次看我的日记了呢~]\n                   <roleplay_options>\n                   接受日记本并翻阅: 青空黎接过她递来的粉色日记本，在天台阳光下缓缓翻开第一页\n                   保持沉默盯着她看: 青空黎没有接本子，只是盯着她略显紧张的表情和轻颤的声音\n                   坐到她身边: 青空黎没有立刻回应，而是缓缓走到络络身边坐下，等待她自己继续说\n                   开玩笑化解气氛: 青空黎微微一笑，开玩笑地说「所以，是要让我当监督官啦？」\n                   跳过时间: 青空黎接过日记本，安静地翻了几页，时间悄然流逝至黄昏深处\n                   和络络聊天: 青空黎试探性地问：「这本是从哪天开始写的？都写些什么呀？」\n                   </roleplay_options>\n                 ")},{role:'assistant',message:y("\n                   [查看日记: 真是的, 就这么喜欢看吗(v〃ω〃)]\n                   <roleplay_options>\n                   阅读日记第一页：青空黎打开粉色的日记本，从第一页开始认真阅读络络的记录内容。\n                   问她封面上的兔子贴纸：青空黎好奇那枚蓝色兔子贴纸的来历，转头向络络询问。\n                   观察络络的小动作：青空黎不急着翻开日记，而是注意到络络表情里一丝期待与不安。\n                   和她闲聊天气：青空黎随口聊起傍晚风有点凉，试图舒缓紧张气氛。\n                   调侃她：“有哪页是‘不许看’的？”青空黎轻松地试图化解她的小慌乱。\n                   转身回教室：青空黎接过日记却并未立刻翻开，而是表示回教室再看，打算慢慢阅读。\n                   </roleplay_options>\n                 ")}],{refresh:'all'})});
//# sourceMappingURL=index.js.map